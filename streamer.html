<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>AR Cardboard Streamer</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        
        .container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .controls {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 1000;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 5px;
            color: white;
        }
        
        .stream-container {
            flex: 1;
            display: flex;
            position: relative;
        }
        
        .eye-stream {
            flex: 1;
            background: #111;
            border: 1px solid #333;
            position: relative;
            overflow: hidden;
        }
        
        .eye-stream iframe {
            width: 100%;
            height: 100%;
            border: none;
            transform-origin: center;
        }
        
        .left-eye {
            border-right: 2px solid #fff;
        }
        
        .status {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 12px;
        }
        
        .fullscreen-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1000;
            background: rgba(255,255,255,0.2);
            border: 1px solid white;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        /* Cardboard optimizations */
        @media screen and (orientation: landscape) {
            .stream-container {
                flex-direction: row;
            }
        }
        
        /* Hide controls in fullscreen */
        .container.fullscreen .controls {
            opacity: 0.1;
            transition: opacity 0.3s;
        }
        
        .container.fullscreen .controls:hover {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container" id="container">
        <div class="controls">
            <div>PC Server: <input type="text" id="serverIP" placeholder="192.168.1.100:8000" style="width: 150px;"></div>
            <button onclick="connectToStream()" style="margin-top: 5px;">Connect</button>
            <div style="font-size: 11px; margin-top: 5px;">Enter your PC's IP:PORT</div>
        </div>
        
        <button class="fullscreen-btn" onclick="toggleFullscreen()">ðŸ“± Cardboard Mode</button>
        
        <div class="stream-container">
            <div class="eye-stream left-eye">
                <iframe id="leftEye" src="about:blank"></iframe>
            </div>
            <div class="eye-stream right-eye">
                <iframe id="rightEye" src="about:blank"></iframe>
            </div>
        </div>
        
        <div class="status" id="status">Enter PC server address to connect</div>
    </div>

    <script>
        let isConnected = false;
        
        function connectToStream() {
            const serverIP = document.getElementById('serverIP').value;
            if (!serverIP) {
                alert('Please enter your PC server address (e.g., 192.168.1.100:8000)');
                return;
            }
            
            const baseURL = `http://${serverIP}`;
            
            // Set both eyes to show the same AR content
            // In a real setup, you'd have separate left/right eye URLs
            document.getElementById('leftEye').src = `${baseURL}/your-ar-file.html#left`;
            document.getElementById('rightEye').src = `${baseURL}/your-ar-file.html#right`;
            
            document.getElementById('status').textContent = `Connected to ${serverIP}`;
            isConnected = true;
        }
        
        function toggleFullscreen() {
            const container = document.getElementById('container');
            
            if (!document.fullscreenElement) {
                container.requestFullscreen().then(() => {
                    container.classList.add('fullscreen');
                    // Lock orientation to landscape
                    if (screen.orientation && screen.orientation.lock) {
                        screen.orientation.lock('landscape').catch(console.log);
                    }
                });
            } else {
                document.exitFullscreen().then(() => {
                    container.classList.remove('fullscreen');
                });
            }
        }
        
        // Auto-detect PC IP (if on same network)
        function detectPCIP() {
            // You can implement WebRTC or websocket discovery here
            // For now, user needs to manually enter IP
        }
        
        // Prevent zoom on mobile
        document.addEventListener('touchmove', function(e) {
            if (e.scale !== 1) { 
                e.preventDefault(); 
            }
        }, { passive: false });
        
        // Auto-connect if IP is in URL params
        const urlParams = new URLSearchParams(window.location.search);
        const autoIP = urlParams.get('server');
        if (autoIP) {
            document.getElementById('serverIP').value = autoIP;
            connectToStream();
        }
    </script>
</body>
</html>